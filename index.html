<!DOCTYPE html>
<html lang="ta">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=3, user-scalable=yes">
<title>Mister Fitness - Gym Registration & Fees</title>
<style>
body { font-family: Arial,sans-serif; margin:0; padding:0; background:linear-gradient(135deg,#4facfe,#00f2fe);}
header { text-align:center; padding:15px; color:#fff; font-size:24px; font-weight:bold; }
.container { max-width:600px; margin:15px auto; background:#fff; padding:20px; border-radius:10px; box-shadow:0 6px 15px rgba(0,0,0,0.2);}
h2 { text-align:center; color:#333; margin-bottom:15px; font-size:20px;}
input, select, textarea, button { width:100%; padding:8px; margin:5px 0; border:1px solid #ccc; border-radius:6px; font-size:14px;}
button { background:#007bff; color:#fff; font-weight:bold; cursor:pointer; border:none; }
button:hover { background:#0056b3; }
.logout { background:#dc3545; margin-top:8px;}
.hidden { display:none; }
table { width:100%; border-collapse:collapse; margin-top:10px; font-size:12px; }
th, td { border:1px solid #ccc; padding:6px; text-align:center; }
th { background:#007bff; color:#fff; }
.modal { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.6); justify-content:center; align-items:center; z-index:1000;}
.modal-content { background:#fff; padding:15px; border-radius:10px; width:95%; max-width:500px; position:relative; overflow-x:auto; }
.close-btn { position:absolute; top:8px; right:10px; background:#dc3545; border:none; color:#fff; padding:4px 8px; cursor:pointer; border-radius:5px; font-size:12px; }
.language { text-align:right; margin-bottom:8px; cursor:pointer; font-size:20px;}
img.member-photo { width:60px; height:60px; object-fit:cover; border-radius:50%; }
@media (max-width:600px) { .container { margin:10px; padding:15px; } table { font-size:11px; } input, select { font-size:12px; } }
</style>
</head>
<body>

<header>Mister Fitness ЁЯПЛя╕П</header>
<div class="language" onclick="toggleLanguage()">ЁЯМР</div>

<!-- Login Page -->
<div class="container" id="loginPage">
<h2 id="loginTitle">ЁЯФР роЙро│рпНроирпБро┤рпИро╡рпБ</h2>
<input type="text" id="username" placeholder="рокропройро░рпН рокрпЖропро░рпН">
<input type="password" id="password" placeholder="роХроЯро╡рпБроЪрпНроЪрпКро▓рпН">
<button onclick="login()" id="loginBtn">роЙро│рпНроирпБро┤рпИ</button>
</div>

<!-- Member Registration Page -->
<div class="container hidden" id="memberPage">
<h2 id="memberTitle">ЁЯСд роЙро▒рпБрокрпНрокро┐ройро░рпН рокродро┐ро╡рпБ</h2>
<input type="hidden" id="editId">
<input type="text" id="regNo" placeholder="рокродро┐ро╡рпБ роОрогрпН (e.g. GYM101)">
<input type="text" id="name" placeholder="рокрпЖропро░рпН">
<input type="number" id="age" placeholder="ро╡ропродрпБ">
<select id="gender">
  <option value="">рокро╛ро▓ро┐ройроорпН</option>
  <option value="роЖрогрпН">роЖрогрпН</option>
  <option value="рокрпЖрогрпН">рокрпЖрогрпН</option>
</select>
<input type="text" id="mobile" placeholder="роХрпИрокрпЗроЪро┐ роОрогрпН">
<input type="email" id="email" placeholder="рооро┐ройрпНройроЮрпНроЪро▓рпН">
<input type="text" id="address" placeholder="роорпБроХро╡ро░ро┐">
<input type="text" id="aadhaar" placeholder="роЖродро╛ро░рпН роОрогрпН">
<select id="plan">
  <option value="">роЙро▒рпБрокрпНрокро┐ройро░рпН родро┐роЯрпНроЯроорпН</option>
  <option value="рооро╛родроорпН - тВ╣400">рооро╛родроорпН - тВ╣400</option>
  <option value="роХро╛ро▓ро╛рогрпНроЯрпБ - тВ╣1200">роХро╛ро▓ро╛рогрпНроЯрпБ - тВ╣1200</option>
  <option value="ро╡ро░рпБроЯроорпН - тВ╣4800">ро╡ро░рпБроЯроорпН - тВ╣4800</option>
</select>
<input type="date" id="startDate">
<label id="medicalLabel">рооро░рпБродрпНродрпБро╡ рокро┐ро░роЪрпНроЪро┐ройрпИроХро│рпН:</label>
<select id="medical">
  <option value="роЗро▓рпНро▓рпИ">роЗро▓рпНро▓рпИ</option>
  <option value="роЖроорпН">роЖроорпН</option>
</select>
<textarea id="medicalDetails" placeholder="роЖроорпН роОройрпНро▒ро╛ро▓рпН, роХрпБро▒ро┐рокрпНрокро┐роЯрпНроЯрпБ роОро┤рпБродро╡рпБроорпН"></textarea>
<label id="feesLabel">роХроЯрпНроЯрогроорпН роЪрпЖро▓рпБродрпНродрокрпНрокроЯрпНроЯродро╛?</label>
<select id="feesStatus">
  <option value="Not Paid">Not Paid</option>
  <option value="Paid">Paid</option>
</select>
<label>роЙро▒рпБрокрпНрокро┐ройро░рпН рокрпБроХрпИрокрпНрокроЯроорпН:</label>
<input type="file" id="photo" accept="image/*">
<button onclick="registerMember()" id="registerBtn">рокродро┐ро╡рпБ</button>
<button class="logout" onclick="logout()" id="logoutBtn">ро╡рпЖро│ро┐ропрпЗро▒рпБ</button>
</div>

<!-- Admin Pages -->
<div class="container hidden" id="adminPage">
<h2 id="adminTitle">ЁЯУЛ роЙро▒рпБрокрпНрокро┐ройро░рпН рокродро┐ро╡рпБроХро│рпН</h2>
<table id="memberTable"></table>
<button onclick="gotoFeePage()" id="feeBtn">ЁЯТ╡ роХроЯрпНроЯрогроЩрпНроХро│рпН</button>
<button class="logout" onclick="logout()" id="logoutBtn2">ро╡рпЖро│ро┐ропрпЗро▒рпБ</button>
</div>

<div class="container hidden" id="feePage">
<h2 id="feeTitle">ЁЯТ╡ роХроЯрпНроЯрог ро╡ро┐ро╡ро░роЩрпНроХро│рпН</h2>
<table id="feeTable"></table>
<button onclick="backToAdmin()" id="backBtn">ЁЯФЩ Back</button>
</div>

<!-- Member Details Modal -->
<div class="modal" id="memberModal">
<div class="modal-content">
<button class="close-btn" onclick="closeModal()">Close</button>
<h3 id="modalTitle">Member Details</h3>
<table id="detailTable"></table>
<img id="modalPhoto" class="member-photo" src="" alt="Member Photo">
</div>
</div>

<script>
// Users
let users={"admin":"1234","member":"1234"};
let role="";
let members=[];
let lang="ta";

// Language toggle
function toggleLanguage(){ 
  lang = (lang=="ta") ? "en" : "ta"; 
  updateLanguage(); 
  loadMembers();
}

// Update language for placeholders and buttons
function updateLanguage(){
  document.getElementById("loginTitle").innerText = (lang=="ta")?"ЁЯФР роЙро│рпНроирпБро┤рпИро╡рпБ":"ЁЯФР Login";
  document.getElementById("username").placeholder = (lang=="ta")?"рокропройро░рпН рокрпЖропро░рпН":"Username";
  document.getElementById("password").placeholder = (lang=="ta")?"роХроЯро╡рпБроЪрпНроЪрпКро▓рпН":"Password";
  document.getElementById("loginBtn").innerText = (lang=="ta")?"роЙро│рпНроирпБро┤рпИ":"Login";
  document.getElementById("memberTitle").innerText = (lang=="ta")?"ЁЯСд роЙро▒рпБрокрпНрокро┐ройро░рпН рокродро┐ро╡рпБ":"ЁЯСд Member Registration";
  document.getElementById("regNo").placeholder = (lang=="ta")?"рокродро┐ро╡рпБ роОрогрпН (e.g. GYM101)":"Reg. No (e.g. GYM101)";
  document.getElementById("name").placeholder = (lang=="ta")?"рокрпЖропро░рпН":"Name";
  document.getElementById("age").placeholder = (lang=="ta")?"ро╡ропродрпБ":"Age";
  document.getElementById("mobile").placeholder = (lang=="ta")?"роХрпИрокрпЗроЪро┐ роОрогрпН":"Mobile";
  document.getElementById("email").placeholder = (lang=="ta")?"рооро┐ройрпНройроЮрпНроЪро▓рпН":"Email";
  document.getElementById("address").placeholder = (lang=="ta")?"роорпБроХро╡ро░ро┐":"Address";
  document.getElementById("aadhaar").placeholder = (lang=="ta")?"роЖродро╛ро░рпН роОрогрпН":"Aadhaar No";
  document.getElementById("medicalLabel").innerText = (lang=="ta")?"рооро░рпБродрпНродрпБро╡ рокро┐ро░роЪрпНроЪро┐ройрпИроХро│рпН:":"Medical Issues:";
  document.getElementById("medicalDetails").placeholder = (lang=="ta")?"роЖроорпН роОройрпНро▒ро╛ро▓рпН, роХрпБро▒ро┐рокрпНрокро┐роЯрпНроЯрпБ роОро┤рпБродро╡рпБроорпН":"If yes, specify details";
  document.getElementById("feesLabel").innerText = (lang=="ta")?"роХроЯрпНроЯрогроорпН роЪрпЖро▓рпБродрпНродрокрпНрокроЯрпНроЯродро╛?":"Fees Paid?";
  document.getElementById("registerBtn").innerText = (lang=="ta")?"рокродро┐ро╡рпБ":"Register";
  document.getElementById("adminTitle").innerText = (lang=="ta")?"ЁЯУЛ роЙро▒рпБрокрпНрокро┐ройро░рпН рокродро┐ро╡рпБроХро│рпН":"ЁЯУЛ Member Records";
  document.getElementById("feeTitle").innerText = (lang=="ta")?"ЁЯТ╡ роХроЯрпНроЯрог ро╡ро┐ро╡ро░роЩрпНроХро│рпН":"ЁЯТ╡ Fee Details";
  document.getElementById("backBtn").innerText = (lang=="ta")?"ЁЯФЩ Back":"ЁЯФЩ Back";
  document.querySelectorAll(".logout").forEach(b=>b.innerText=(lang=="ta")?"ро╡рпЖро│ро┐ропрпЗро▒рпБ":"Logout");
}

// Login
function login(){
  let u=document.getElementById("username").value;
  let p=document.getElementById("password").value;
  if(users[u] && users[u]===p){
    role=u;
    document.getElementById("loginPage").classList.add("hidden");
    if(u=="admin") document.getElementById("adminPage").classList.remove("hidden");
    else document.getElementById("memberPage").classList.remove("hidden");
    loadMembers();
  } else { 
    alert(lang=="ta"?"тЭМ родро╡ро▒ро╛рой рокропройро░рпН рокрпЖропро░рпН роЕро▓рпНро▓родрпБ роХроЯро╡рпБроЪрпНроЪрпКро▓рпН!":"тЭМ Invalid credentials!"); 
  }
}

// Logout
function logout(){
  role="";
  document.getElementById("loginPage").classList.remove("hidden");
  document.getElementById("memberPage").classList.add("hidden");
  document.getElementById("adminPage").classList.add("hidden");
  document.getElementById("feePage").classList.add("hidden");
  closeModal();
  clearForm();
}

// Register or Update Member
function registerMember(){
  const file = document.getElementById("photo").files[0];
  const reader = new FileReader();
  reader.onload = function(e){
    let editId=document.getElementById("editId").value;
    let member={
      id: editId ? parseInt(editId) : Date.now(),
      regNo:document.getElementById("regNo").value,
      name:document.getElementById("name").value,
      age:document.getElementById("age").value,
      gender:document.getElementById("gender").value,
      mobile:document.getElementById("mobile").value,
      email:document.getElementById("email").value,
      address:document.getElementById("address").value,
      aadhaar:document.getElementById("aadhaar").value,
      plan:document.getElementById("plan").value,
      date:document.getElementById("startDate").value,
      medical:document.getElementById("medical").value,
      medicalDetails:document.getElementById("medicalDetails").value,
      amount:0,
      feesPaid:document.getElementById("feesStatus").value,
      photo:e.target.result
    };
    if(!member.regNo || !member.name || !member.plan || !member.date){ 
      alert(lang=="ta"?"тЪая╕П родрпЗро╡рпИропро╛рой рокроХрпБродро┐роХро│рпИ роиро┐ро░рокрпНрокро╡рпБроорпН!":"тЪая╕П Fill required fields!"); 
      return; 
    }
    members=JSON.parse(localStorage.getItem("members"))||[];
    if(!editId && members.some(m=>m.regNo===member.regNo)){
      alert(lang=="ta"?"тЪая╕П роЗроирпНрод рокродро┐ро╡рпБ роОрогрпН роПро▒рпНроХройро╡рпЗ роЙро│рпНро│родрпБ!":"тЪая╕П This Reg.No already exists!");
      return;
    }
    if(editId){
      members=members.map(m=> m.id==editId ? member : m);
    } else { members.push(member); }
    localStorage.setItem("members",JSON.stringify(members));
    clearForm();
    alert(lang=="ta"?"тЬЕ роЙро▒рпБрокрпНрокро┐ройро░рпН рокродро┐ро╡рпБ роЪрпЖропрпНропрокрпНрокроЯрпНроЯродрпБ":"тЬЕ Member Registered");
    loadMembers();
  };
  
  if(file) reader.readAsDataURL(file);
  else {
    if(!document.getElementById("editId").value){
      alert(lang=="ta"?"тЪая╕П рокрпБроХрпИрокрпНрокроЯродрпНродрпИ родрпЗро░рпНро╡рпБ роЪрпЖропрпНропро╡рпБроорпН!":"тЪая╕П Select a photo!");
      return;
    } else {
      let editId=document.getElementById("editId").value;
      let existing=members.find(m=>m.id==editId);
      reader.onload({target:{result: existing.photo}});
    }
  }
}

// Edit Member
function editMember(id){
  let m=members.find(x=>x.id==id);
  if(!m) return;
  document.getElementById("editId").value=m.id;
  document.getElementById("regNo").value=m.regNo;
  document.getElementById("name").value=m.name;
  document.getElementById("age").value=m.age;
  document.getElementById("gender").value=m.gender;
  document.getElementById("mobile").value=m.mobile;
  document.getElementById("email").value=m.email;
  document.getElementById("address").value=m.address;
  document.getElementById("aadhaar").value=m.aadhaar;
  document.getElementById("plan").value=m.plan;
  document.getElementById("startDate").value=m.date;
  document.getElementById("medical").value=m.medical;
  document.getElementById("medicalDetails").value=m.medicalDetails;
  document.getElementById("feesStatus").value=m.feesPaid;
  document.getElementById("memberPage").classList.remove("hidden");
  document.getElementById("adminPage").classList.add("hidden");
  window.scrollTo(0,0);
}

// Clear Form
function clearForm(){
  document.getElementById("editId").value="";
  ["regNo","name","age","gender","mobile","email","address","aadhaar","plan","startDate","medicalDetails","photo"].forEach(id=>document.getElementById(id).value="");
  document.getElementById("medical").value="роЗро▓рпНро▓рпИ";
  document.getElementById("feesStatus").value="Not Paid";
}

// Load Members
function loadMembers(){
  members=JSON.parse(localStorage.getItem("members"))||[];
  let today=new Date();
  members.forEach(m=>{
    if(m.date){
      let start=new Date(m.date);
      let planType=m.plan.split(" - ")[0];
      if(planType=="рооро╛родроорпН"||planType=="Monthly"){ start.setMonth(start.getMonth()+1); if(today>start) m.feesPaid=(lang=="ta"?"роХроЯрпНроЯрокрпНрокроЯро╡ро┐ро▓рпНро▓рпИ":"Not Paid"); }
      else if(planType=="роХро╛ро▓ро╛рогрпНроЯрпБ"||planType=="Quarterly"){ start.setMonth(start.getMonth()+3); if(today>start) m.feesPaid=(lang=="ta"?"роХроЯрпНроЯрокрпНрокроЯро╡ро┐ро▓рпНро▓рпИ":"Not Paid"); }
      else if(planType=="ро╡ро░рпБроЯроорпН"||planType=="Annual"){ start.setFullYear(start.getFullYear()+1); if(today>start) m.feesPaid=(lang=="ta"?"роХроЯрпНроЯрокрпНрокроЯро╡ро┐ро▓рпНро▓рпИ":"Not Paid"); }
    }
  });
  localStorage.setItem("members",JSON.stringify(members));
  if(role=="admin"){
    let table=document.getElementById("memberTable");
    table.innerHTML=`<tr><th>Photo</th><th>Reg.No</th><th>${lang=="ta"?"рокрпЖропро░рпН":"Name"}</th><th>${lang=="ta"?"родро┐роЯрпНроЯроорпН":"Plan"}</th><th>Start Date</th><th>${lang=="ta"?"роХроЯрпНроЯрог роиро┐ро▓рпИ":"Fees Paid"}</th><th>${lang=="ta"?"роЪрпЖропро▓рпН":"Actions"}</th></tr>`;
    members.forEach(m=>{
      table.innerHTML+=`<tr>
        <td><img class="member-photo" src="${m.photo}" /></td>
        <td>${m.regNo}</td>
        <td><a href="#" onclick="showMember(${m.id})">${m.name}</a></td>
        <td>${m.plan}</td>
        <td>${m.date}</td>
        <td>${m.feesPaid}</td>
        <td>
          <button onclick='editMember(${m.id})'>тЬПя╕П</button>
          <button onclick='removeMember(${m.id})'>тЭМ</button>
        </td>
      </tr>`;
    });

    let feeTable=document.getElementById("feeTable");
    if(feeTable){
      feeTable.innerHTML=`<tr><th>Reg.No</th><th>${lang=="ta"?"рокрпЖропро░рпН":"Name"}</th><th>Plan</th><th>${lang=="ta"?"роХроЯрпНроЯрог родрпКроХрпИ":"Fee Amount"}</th><th>${lang=="ta"?"роХроЯрпНроЯрог роиро┐ро▓рпИ":"Fees Paid"}</th><th>${lang=="ta"?"роЪрпЖропро▓рпН":"Actions"}</th></tr>`;
      members.forEach(m=>{
        feeTable.innerHTML+=`<tr>
          <td>${m.regNo}</td>
          <td>${m.name}</td>
          <td>${m.plan}</td>
          <td><input type='number' value='${m.amount}' onchange='updateAmount(${m.id},this.value)'></td>
          <td>${m.feesPaid}</td>
          <td><button onclick='markPaid(${m.id})'>${lang=="ta"?"роХроЯрпНроЯрокрпНрокроЯрпНроЯродрпБ":"Paid"}</button></td>
        </tr>`;
      });
    }
  }
}

// Member Modal
function showMember(id){
  let m=members.find(x=>x.id==id);
  if(!m) return;
  let table=document.getElementById("detailTable");
  let modalPhoto=document.getElementById("modalPhoto");
  table.innerHTML=`<tr><th>Field</th><th>Value</th></tr>
    <tr><td>Reg.No</td><td>${m.regNo}</td></tr>
    <tr><td>${lang=="ta"?"рокрпЖропро░рпН":"Name"}</td><td>${m.name}</td></tr>
    <tr><td>${lang=="ta"?"ро╡ропродрпБ":"Age"}</td><td>${m.age}</td></tr>
    <tr><td>${lang=="ta"?"рокро╛ро▓ро┐ройроорпН":"Gender"}</td><td>${m.gender}</td></tr>
    <tr><td>${lang=="ta"?"роХрпИрокрпЗроЪро┐ роОрогрпН":"Mobile"}</td><td>${m.mobile}</td></tr>
    <tr><td>${lang=="ta"?"рооро┐ройрпНройроЮрпНроЪро▓рпН":"Email"}</td><td>${m.email}</td></tr>
    <tr><td>${lang=="ta"?"роорпБроХро╡ро░ро┐":"Address"}</td><td>${m.address}</td></tr>
    <tr><td>${lang=="ta"?"роЖродро╛ро░рпН роОрогрпН":"Aadhaar"}</td><td>${m.aadhaar}</td></tr>
    <tr><td>${lang=="ta"?"родро┐роЯрпНроЯроорпН":"Plan"}</td><td>${m.plan}</td></tr>
    <tr><td>Start Date</td><td>${m.date}</td></tr>
    <tr><td>${lang=="ta"?"рооро░рпБродрпНродрпБро╡ рокро┐ро░роЪрпНроЪро┐ройрпИроХро│рпН":"Medical Issues"}</td><td>${m.medical}</td></tr>
    <tr><td>${lang=="ta"?"рооро░рпБродрпНродрпБро╡ ро╡ро┐ро╡ро░роЩрпНроХро│рпН":"Medical Details"}</td><td>${m.medicalDetails}</td></tr>
    <tr><td>${lang=="ta"?"роХроЯрпНроЯрог роиро┐ро▓рпИ":"Fees Paid"}</td><td>${m.feesPaid}</td></tr>`;
  modalPhoto.src = m.photo;
  document.getElementById("memberModal").style.display="flex";
}
function closeModal(){ document.getElementById("memberModal").style.display="none"; }
function removeMember(id){ members = members.filter(x=>x.id!=id); localStorage.setItem("members",JSON.stringify(members)); loadMembers(); }
function gotoFeePage(){ document.getElementById("adminPage").classList.add("hidden"); document.getElementById("feePage").classList.remove("hidden"); }
function backToAdmin(){ document.getElementById("feePage").classList.add("hidden"); document.getElementById("adminPage").classList.remove("hidden"); }
function updateAmount(id,value){ let m=members.find(x=>x.id==id); if(m){ m.amount=parseFloat(value)||0; localStorage.setItem("members",JSON.stringify(members)); } }
function markPaid(id){ let m=members.find(x=>x.id==id); if(m){ m.feesPaid=lang=="ta"?"роХроЯрпНроЯрокрпНрокроЯрпНроЯродрпБ":"Paid"; localStorage.setItem("members",JSON.stringify(members)); loadMembers(); } }
</script>
</body>
</html>
